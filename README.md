# okido-bot

X(Twitter) 日本語誤用修正ボット「okido-bot」
1. プロジェクト概要
本プロジェクトは、X（旧Twitter）上における日本語の誤用（例：「ゆうて」「そうゆー」等）を自動で検知し、オーキド博士の口調で正しい用法をリプライ形式で通知する自動巡回ボットである。 GitHub Actionsを用いた完全クラウド実行環境により、ローカルPCの稼働を必要としない「サーバーレス運用」を実現している。

2. システム要件・仕様
本ボットは以下の要件に基づいて設計・運用されている。

実行環境

プラットフォーム: GitHub Actions (Ubuntu-latest)

言語: Python 3.9

スケジューリング: cron実行（日本時間 08:00 / 20:00 の1日2回）

使用技術・API

X API v2 (Tweepy): リプライの投稿、ボットアカウントの操作に使用。

RapidAPI (Twitter API 45): Xの検索制限を回避し、リアルタイムで特定の誤用キーワードを含むポストを効率的に抽出するために利用。

python-dotenv: 環境変数による秘匿情報の管理。

3. 主要機能詳細
① 誤用検知・修正アルゴリズム

messages.py にて定義された CORRECTION_RULES（誤用と正誤の辞書データ）に基づき、ランダムにターゲットを選択。対象ユーザーが既に正解の言葉もツイートに含まれている場合は「二重の指摘」を避けるためのスキップ機能を搭載している。

② 重複防止（記憶管理）機能

過去にリプライを送ったポストのIDを replied_tweets.txt に記録。実行のたびにこのリストを参照し、同一ポストに対して複数回リプライを送ることを防ぐ。このファイルはパトロール完了後に自動的にGitHubリポジトリへコミットされ、永続化される。

③ 制限回避（アンチ・スパム）対策

Xのプラットフォーム保護機能（レートリミット）に抵触しないよう、以下の措置を講じている。

各リプライ間に 60秒〜180秒 のランダムな待機時間（sleep）を挿入。

1回の実行における最大リプライ送信数を制限。

4. セキュリティ構成
GitHub Secrets: 以下のAPIキーおよびアクセストークンは、コード内に直接記述せず、GitHubの暗号化されたSecrets変数として管理している。

X_API_KEY, X_API_SECRET, X_ACCESS_TOKEN, X_ACCESS_TOKEN_SECRET, X_BEARER_TOKEN

RAPID_API_KEY

非公開設定: 開発環境および個人の秘密保持のため、本リポジトリは Private 設定にて運用。

5. 導入・運用方法
GitHubリポジトリへ本ソースコード一式をアップロードする。

GitHub Secretsに各APIキーを登録。

.github/workflows/patrol.yml のcron設定により、指定時間に自動実行が開始される。

手動で実行する場合は、Actionsタブから workflow_dispatch をトリガーする。
