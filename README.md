# 🎓 日本語パトロールX bot マサラタウン日本語研究所　
### 〜 正しい日本語、ゲットじゃぞ！ 〜

![GitHub Actions Status](https://img.shields.io/badge/Status-Active-brightgreen)
![Python Version](https://img.shields.io/badge/Python-3.9%2B-blue)
![License](https://img.shields.io/badge/License-MIT-orange)

X（旧Twitter）上に蔓延る「日本語ミス」を調査し、オーキド博士が添削リプライを送る高度な自動巡回システムです。
単なるボットではなく、「人間らしさ」を徹底追求した次世代型SNSエージェントを目指しています。

---

## 📖 プロジェクトの背景

SNSの普及により、若者を中心に「そうゆう（正：そういう）」「ゆった（正：いった）」といった誤用が急増しています。
この現状を憂いたマサラタウンのオーキド博士が、24時間体制で日本語の乱れを正します。

---

## 🛠️ 技術的特徴（Technical Features）

### 1. ハイブリッド・アーキテクチャ
* **API層**: X API v2 (Free Plan) を使用し、リプライの投稿を担当。
* **検索層**: X純正の検索制限を回避するため、**RapidAPI (Twitter-API45)** を介してツイートを取得。
* **実行層**: **GitHub Actions** 上で完全サーバーレス稼働。

### 2. インテリジェント・ステルス・アルゴリズム
Xの厳しいスパム検知を回避し、アカウントの健全性を保つために以下の機能を搭載しています。

* **Jittering（ゆらぎ待機）**: 
    予約時間から **0秒〜900秒の間でランダムな待機時間** を発生させ、機械的な定期投稿パターンを破壊します。
* **Sleep Cycle（睡眠サイクル）**: 
    日本時間（JST）の深夜帯（AM 2:00 〜 AM 8:00）は、博士の休息時間としてパトロールを自動停止。不自然な24時間連続活動を回避します。
* **Variable Batching（件数ムラ）**: 
    1回のパトロールあたりの添削件数を **2〜3件でランダム化**。一貫性を排除し、人間が「たまたま見つけた」状況をシミュレートします。
* **Randomized Cooling（インターバル）**: 
    リプライとリプライの間に **180秒〜300秒の待機** を挟み、バースト投稿による403エラーのリスクを最小化します。

### 3. 投稿リミットの最適分配
本システムは、X API Freeプランの制限（月間500投稿）を数学的に計算し、最大限活用するように設計されています。
月間枠の93%を消費する高効率設計により、制限内での最大級の活動を実現しています。
* 月間上限: 500件
* 1日平均許容数: 約16.1件
* 本システムの設計値: 1日平均15件（月間換算 約465件）
* 枠消費率: 93%

---

## 📂 リポジトリ構成と役割

| ファイル名 | 役割 | 詳細解説 |
| :--- | :--- | :--- |
| `okido_bot_cloud.py` | **メイン頭脳** | 検索・判定・投稿・ゆらぎ制御を司るコアプログラム。 |
| `messages.py` | **言語データベース** | 100種類以上のセリフと、添削用辞書（Dictionary）を格納。 |
| `.github/workflows/main.yml` | **運営指示書** | 3時間おきの定期実行スケジュールと環境変数の定義。 |
| `replied_tweets.txt` | **パトロール日誌** | 重複リプライを防ぐために投稿済みIDを記録するデータベース。 |
| `requirements.txt` | **必要図鑑** | 実行に必要なPythonライブラリのリスト。 |

---

## ⚙️ セットアップと運用方法

### 必要な環境変数 (Secrets)
GitHubレポジトリの `Settings > Secrets and variables > Actions` に以下の鍵を登録する必要があります。

* `X_API_KEY / X_API_SECRET`: XのConsumer Key
* `X_ACCESS_TOKEN / X_ACCESS_TOKEN_SECRET`: 権限（Read and Write）を持つトークン
* `X_BEARER_TOKEN`: X API v2用
* `RAPID_API_KEY`: RapidAPIの認証用

### パトロール・ロジック
1.  **起動**: GitHub Actionsが3時間おきにコンテナを起動。
2.  **判定**: 現在時刻が「睡眠時間」でないかチェック。
3.  **待機**: 「二度寝（Jitter）」を実行。
4.  **検索**: 修正対象キーワード（「そうゆう」等）を検索。
5.  **添削**: セリフをランダム抽選し、Xへリプライ。
6.  **記録**: 投稿したIDを `replied_tweets.txt` に追記して保存。

---

## 📝 添削ルールの一部紹介

博士が特に重点的に調査している日本語は以下の通りです：

* 「そうゆう」 → 「そういう」
* 「こうゆう」 → 「こういう」
* 「ゆった」   → 「いった」
* 「こんにちわ」 → 「こんにちは」
* 「こんばんわ」 → 「こんばんは」

---

## ⚠️ 免責事項（Disclaimer）
* 本プロジェクトは日本語の啓蒙とエンターテインメントを目的とした非営利活動です。
* Xの利用規約（TOS）を遵守するため、月間500件の投稿枠を厳守しています。
* ポケモンおよびオーキド博士の著作権は、株式会社ポケモン・任天堂・クリーチャーズ・ゲームフリークに帰属します。

---

### 🎓 開発者より
「日本語もポケモンも、正しく育ててこそ真のマスターじゃぞい！」

© 2025 マサラタウン日本語研究所 - Pokémon is a trademark of Nintendo/Creatures Inc./GAME FREAK inc.
